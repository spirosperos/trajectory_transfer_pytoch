function tmpreturn = conservative_forces(q, q_p, theta, param)
  m = [0 0 0 0 0 0 0 0 0 0 0 0 0 0;];
  t6 = param.K__1 * (theta(1) - q(1));
  m(1,1) = param.beta * q_p(1) - t6;
  t7 = param.sp7x * param.m7;
  t8 = q(7);
  t9 = cos(t8);
  t10 = t9 * t7;
  t11 = param.m7 * param.sp7y;
  t12 = sin(t8);
  t13 = t12 * t11;
  t15 = param.m6 * param.sp6x - t10 + t13;
  t16 = q(6);
  t17 = cos(t16);
  t18 = t17 * t15;
  t19 = -param.sp7z - param.d7;
  t21 = param.m6 * param.sp6y;
  t22 = param.m7 * t19 - t21;
  t23 = sin(t16);
  t24 = t22 * t23;
  t25 = param.m5 * param.sp5x;
  t26 = t18 + t24 + t25;
  t27 = q(5);
  t28 = cos(t27);
  t30 = t12 * t7;
  t31 = t11 * t9;
  t34 = -param.m5 * param.sp5y + param.m6 * param.sp6z + t30 + t31;
  t35 = sin(t27);
  t37 = param.m4 * param.sp4x;
  t38 = t26 * t28 + t34 * t35 - t37;
  t39 = q(4);
  t40 = cos(t39);
  t44 = -param.m7 * t19 + t21;
  t45 = t17 * t44;
  t46 = t23 * t15;
  t47 = param.d5 + param.d6;
  t53 = t45 + t46 + param.m7 * t47 + param.m6 * t47 + (param.d5 + param.sp5z) * param.m5 + param.m4 * param.sp4y;
  t54 = sin(t39);
  t55 = t54 * t53;
  t57 = -param.m3 * param.sp3x + t38 * t40 + t55;
  t58 = q(3);
  t59 = cos(t58);
  t61 = sin(t58);
  t62 = -t34;
  t63 = t62 * t61;
  t65 = t35 * t61;
  t67 = t24 + t25;
  t68 = t67 * t61;
  t72 = param.m3 * param.sp3y - param.m4 * param.sp4z;
  t76 = q(2);
  t77 = cos(t76);
  t79 = t40 * t53;
  t80 = -t15;
  t82 = t23 * t44;
  t83 = t17 * t80 - t25 + t82;
  t86 = t28 * t83 + t35 * t62 + t37;
  t88 = param.d3 + param.d4;
  t97 = sin(t76);
  t105 = (theta(2) - t76) * param.K__2;
  m(1,2) = param.g * (t77 * (param.m2 * param.sp2x - t18 * t65 - t28 * t63 - t35 * t68 + t57 * t59 + t61 * t72) - t97 * (t79 + t54 * t86 + param.m7 * t88 + param.m6 * t88 + param.m5 * t88 + param.m4 * t88 + (param.d3 + param.sp3z) * param.m3 + param.m2 * param.sp2y)) + param.beta * q_p(2) - t105;
  t121 = (theta(3) - t58) * param.K__3;
  m(1,3) = param.g * t97 * (-t18 * t35 * t59 - t28 * t59 * t62 - t35 * t59 * t67 - t57 * t61 + t59 * t72) + param.beta * q_p(3) - t121;
  t135 = (theta(4) - t39) * param.K__4;
  m(1,4) = param.g * (t97 * t59 * (-t38 * t54 + t79) + t77 * (t40 * t86 - t55)) + param.beta * q_p(4) - t135;
  t158 = (theta(5) - t27) * param.K__5;
  m(1,5) = param.g * (t97 * (t59 * t40 * (-t26 * t35 + t28 * t34) + t35 * t63 - t18 * t28 * t61 - t28 * t68) + t77 * t54 * (t28 * t62 - t35 * t83)) + param.beta * q_p(5) - t158;
  t163 = -t82 + t18;
  t186 = (theta(6) - t16) * param.K__6;
  m(1,6) = param.g * (t97 * (t59 * (t40 * t28 * (t22 * t17 - t46) + t54 * t163) + t46 * t65 - t35 * t17 * t22 * t61) + t77 * (t40 * t163 + t54 * t28 * (-t23 * t80 + t45))) + param.beta * q_p(6) - t186;
  t187 = t30 + t31;
  t188 = t17 * t187;
  t190 = t10 - t13;
  t194 = t23 * t187;
  t198 = -t190;
  t219 = (theta(7) - t8) * param.K__7;
  m(1,7) = param.g * (t97 * (t59 * (t40 * (t188 * t28 + t190 * t35) + t194 * t54) - t28 * t198 * t61 - t188 * t65) + t77 * (t40 * t194 + t54 * (-t17 * t187 * t28 + t198 * t35))) + param.beta * q_p(7) - t219;
  m(1,8) = t6;
  m(1,9) = t105;
  m(1,10) = t121;
  m(1,11) = t135;
  m(1,12) = t158;
  m(1,13) = t186;
  m(1,14) = t219;
  tmpreturn = m';
